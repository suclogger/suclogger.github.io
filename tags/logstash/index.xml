<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Logstash on To Mars</title><link>https://www.tomars.cv/tags/logstash/</link><description>Recent content in Logstash on To Mars</description><generator>Hugo</generator><language>zh-cn</language><lastBuildDate>Sun, 11 Dec 2016 13:25:50 +0000</lastBuildDate><atom:link href="https://www.tomars.cv/tags/logstash/index.xml" rel="self" type="application/rss+xml"/><item><title>MySQL到Elasticsearch的同步之路</title><link>https://www.tomars.cv/post/mysql%E5%88%B0elasticsearch%E7%9A%84%E5%90%8C%E6%AD%A5%E4%B9%8B%E8%B7%AF/</link><pubDate>Sun, 11 Dec 2016 13:25:50 +0000</pubDate><guid>https://www.tomars.cv/post/mysql%E5%88%B0elasticsearch%E7%9A%84%E5%90%8C%E6%AD%A5%E4%B9%8B%E8%B7%AF/</guid><description>&lt;p>六个月前写&lt;a href="http://suclogger.me/%E4%B9%B0%E5%A5%BD%E8%BD%A6%E6%90%9C%E7%B4%A2%E7%9A%84Elasticsearch%E5%AE%9E%E8%B7%B5%EF%BC%9A%E5%88%9D%E4%BD%93%E9%AA%8C/">买好车搜索的Elasticsearch实践：初体验&lt;/a>这篇文章的时候，我司刚刚迁移到Elasticserach，六个月之后的今天跟我最开始什么都不懂的时候搭起来的架构还是一模一样，这几天稍微有点时间，将Elasticsearch升级到了5.0.2，顺便整理了一下架构。
这一篇主要记录搜索与数据库同步的一些变化。&lt;/p>
&lt;!-- more -->
&lt;h2 id="洪荒时代">洪荒时代&lt;/h2>
&lt;p>Elasticsearch 2.0 之前，同步数据到Elasticsearch的功能由一个官方提供的插件（plugin）占领：river。通过实现不同的river插件，可以将数据从数据库，消息队列，nosql等等同步到Elasticsearch中，比如：&lt;a href="https://github.com/elastic/elasticsearch-river-rabbitmq">elasticsearch-river-rabbitmq&lt;/a>、&lt;a href="https://github.com/elastic/elasticsearch-river-couchdb">elasticsearch-river-couchdb&lt;/a>等等。
以plugin方式运行的形式如图：
&lt;img src="https://www.tomars.cv/image/2016-12-11-13-39-47.jpg" alt="">
可以看到，插件与Elasticsearch运行在同一个jvm上，显然这会导致一系列的问题，正如&lt;a href="https://www.elastic.co/blog/deprecating-rivers">Deprecating Rivers&lt;/a>中所说：&lt;/p></description></item></channel></rss>